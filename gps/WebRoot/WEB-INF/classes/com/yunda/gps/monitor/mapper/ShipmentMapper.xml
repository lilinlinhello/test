<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yunda.gps.monitor.mapper.ShipmentMapper" >
  <resultMap id="BaseResultMap" type="com.yunda.gps.monitor.pojo.ShipmentPo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="shipment_id" property="shipmentId" jdbcType="CHAR" />
    <result column="line_id" property="lineId" jdbcType="VARCHAR" />
    <result column="line_name" property="lineName" jdbcType="VARCHAR" />
    <result column="start_place" property="startPlace" jdbcType="INTEGER" />
    <result column="end_place" property="endPlace" jdbcType="INTEGER" />
    <result column="pass_place" property="passPlace" jdbcType="VARCHAR" />
    <result column="plan_leave_time" property="planLeaveTime" jdbcType="TIMESTAMP" />
    <result column="plan_arrive_time" property="planArriveTime" jdbcType="TIMESTAMP" />
    <result column="license_card" property="licenseCard" jdbcType="VARCHAR" />
    <result column="pre_flag" property="preFlag" jdbcType="TINYINT" />
    <result column="plan_line_id" property="planLineId" jdbcType="VARCHAR" />
    <result column="plan_line_type" property="planLineType" jdbcType="TINYINT" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
  </resultMap>
  <sql id="Base_Column_List" >
    
    id, shipment_id, line_id, line_name, start_place, end_place, pass_place, plan_leave_time, 
    plan_arrive_time, license_card, pre_flag, plan_line_id, plan_line_type ,create_time
  </sql>
  
  
  <select id="pageQuery" resultMap="BaseResultMap" parameterType="com.yunda.gps.monitor.pojo.ShipmentPo" >
    select 
    id, shipment_id, line_id, line_name, start_place, end_place, pass_place, 
    DATE_FORMAT(plan_leave_time,'%Y-%c-%d %h:%i:%s')as planLeaveTime,
	DATE_FORMAT(plan_arrive_time,'%Y-%c-%d %h:%i:%s') as planArriveTime,
    license_card, pre_flag, plan_line_id, plan_line_type,
    DATE_FORMAT(create_time,'%Y-%c-%d %h:%i:%s') as createTime
    from shipment
    <where>
    	<if test="shipmentId != null and shipmentId != ''"> and shipment_id = #{shipmentId}</if>
		<if test="lineId != null and lineId != ''"> and line_id = #{lineId}</if>
		<if test="lineName != null and lineName != ''"> and line_name like concat('%', #{lineName}, '%')</if>
    </where>
  </select>
  
  
</mapper>